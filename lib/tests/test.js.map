{"version":3,"sources":["../../src/tests/test.js"],"names":["sitemapper","describe","beforeEach","Sitemapper","it","initializeTimeout","should","be","Function","crawl","parse","fetch","url","equal","timeout","done","then","data","sites","Array","length","above","error","console","getSites","err"],"mappings":"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","sourcesContent":["import 'async';\r\nimport 'assert';\r\nimport 'should';\r\nimport isUrl from 'is-url';\r\n\r\nimport Sitemapper from '../assets/sitemapper.js';\r\nlet sitemapper;\r\n\r\ndescribe('Sitemapper', function () {\r\n\r\n  beforeEach(() => {\r\n    sitemapper = new Sitemapper();\r\n  });\r\n\r\n  describe('Sitemapper Class', function () {\r\n\r\n    it('should have initializeTimeout method', () => {\r\n      sitemapper.initializeTimeout.should.be.Function;\r\n    });\r\n\r\n    it('should have crawl method', () => {\r\n      sitemapper.crawl.should.be.Function;\r\n    });\r\n\r\n    it('should have parse method', () => {\r\n      sitemapper.parse.should.be.Function;\r\n    });\r\n\r\n    it('should have fetch method', () => {\r\n      sitemapper.fetch.should.be.Function;\r\n    });\r\n\r\n    it('should contruct with a url', () => {\r\n      sitemapper = new Sitemapper({\r\n        url: 'google.com',\r\n      });\r\n      sitemapper.url.should.equal('google.com');\r\n    });\r\n\r\n    it('should contruct with a timeout', () => {\r\n      sitemapper = new Sitemapper({\r\n        timeout: 1000,\r\n      });\r\n      sitemapper.timeout.should.equal(1000);\r\n    });\r\n\r\n    it('should set timeout', () => {\r\n      sitemapper.timeout = 1000;\r\n      sitemapper.timeout.should.equal(1000);\r\n    });\r\n\r\n    it('should set url', () => {\r\n      sitemapper.url = 1000;\r\n      sitemapper.url.should.equal(1000);\r\n    });\r\n  });\r\n\r\n  describe('fetch Method resolves sites to array', function () {\r\n    it('http://wp.seantburke.com/sitemap.xml sitemaps should be an array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://wp.seantburke.com/sitemap.xml';\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          data.url.should.equal(url);\r\n          data.sites.length.should.be.above(2);\r\n          isUrl(data.sites[0]).should.be.true;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n\r\n    it('giberish.giberish should fail silently with an empty array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://giberish.giberish';\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n\r\n    it('https://www.google.com/work/sitemap.xml sitemaps should be an array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'https://www.google.com/work/sitemap.xml';\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          data.url.should.equal(url);\r\n          data.sites.length.should.be.above(2);\r\n          isUrl(data.sites[0]).should.be.true;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n\r\n    it('http://www.cnn.com/sitemaps/sitemap-index.xml sitemaps should be an array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://www.cnn.com/sitemaps/sitemap-index.xml';\r\n      sitemapper.timeout = 5000;\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          data.url.should.equal(url);\r\n          data.sites.length.should.be.above(2);\r\n          isUrl(data.sites[0]).should.be.true;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n  });\r\n\r\n  describe('getSites method', function () {\r\n    it('getSites should be backwards compatible', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://wp.seantburke.com/sitemap.xml';\r\n      sitemapper.getSites(url, (err, sites) => {\r\n        sites.should.be.Array;\r\n        isUrl(sites[0]).should.be.true;\r\n        done();\r\n      });\r\n    });\r\n  });\r\n});\r\n"],"file":"test.js"}