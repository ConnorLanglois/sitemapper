{"version":3,"sources":["../../src/tests/test.es5.js"],"names":["require","isUrl","Sitemapper","sitemapper","describe","beforeEach","it","initializeTimeout","should","be","Function","crawl","parse","fetch","url","equal","timeout","done","then","data","sites","Array","length","above","error","console","getSites","err"],"mappings":"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","sourcesContent":["require('async');\r\nrequire('assert');\r\nrequire('should');\r\nconst isUrl = require('is-url');\r\n\r\nconst Sitemapper = require('../assets/sitemapper.js');\r\nvar sitemapper;\r\n\r\ndescribe('Sitemapper', function () {\r\n\r\n  beforeEach(() => {\r\n    sitemapper = new Sitemapper();\r\n  });\r\n\r\n  describe('Sitemapper Class', function () {\r\n\r\n    it('should have initializeTimeout method', () => {\r\n      sitemapper.initializeTimeout.should.be.Function;\r\n    });\r\n\r\n    it('should have crawl method', () => {\r\n      sitemapper.crawl.should.be.Function;\r\n    });\r\n\r\n    it('should have parse method', () => {\r\n      sitemapper.parse.should.be.Function;\r\n    });\r\n\r\n    it('should have fetch method', () => {\r\n      sitemapper.fetch.should.be.Function;\r\n    });\r\n\r\n    it('should contruct with a url', () => {\r\n      sitemapper = new Sitemapper({\r\n        url: 'google.com',\r\n      });\r\n      sitemapper.url.should.equal('google.com');\r\n    });\r\n\r\n    it('should contruct with a timeout', () => {\r\n      sitemapper = new Sitemapper({\r\n        timeout: 1000,\r\n      });\r\n      sitemapper.timeout.should.equal(1000);\r\n    });\r\n\r\n    it('should set timeout', () => {\r\n      sitemapper.timeout = 1000;\r\n      sitemapper.timeout.should.equal(1000);\r\n    });\r\n\r\n    it('should set url', () => {\r\n      sitemapper.url = 1000;\r\n      sitemapper.url.should.equal(1000);\r\n    });\r\n  });\r\n\r\n  describe('fetch Method resolves sites to array', function () {\r\n    it('http://wp.seantburke.com/sitemap.xml sitemaps should be an array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://wp.seantburke.com/sitemap.xml';\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          data.url.should.equal(url);\r\n          data.sites.length.should.be.above(2);\r\n          isUrl(data.sites[0]).should.be.true;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n\r\n    it('giberish.giberish should fail silently with an empty array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://giberish.giberish';\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n\r\n    it('https://www.google.com/work/sitemap.xml sitemaps should be an array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'https://www.google.com/work/sitemap.xml';\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          data.url.should.equal(url);\r\n          data.sites.length.should.be.above(2);\r\n          isUrl(data.sites[0]).should.be.true;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n\r\n    it('http://www.cnn.com/sitemaps/sitemap-index.xml sitemaps should be an array', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://www.cnn.com/sitemaps/sitemap-index.xml';\r\n      sitemapper.timeout = 5000;\r\n      sitemapper.fetch(url)\r\n        .then(data => {\r\n          data.sites.should.be.Array;\r\n          data.url.should.equal(url);\r\n          data.sites.length.should.be.above(2);\r\n          isUrl(data.sites[0]).should.be.true;\r\n          done();\r\n        })\r\n        .catch(error => console.error(error));\r\n    });\r\n  });\r\n\r\n  describe('getSites method', function () {\r\n    it('getSites should be backwards compatible', function (done) {\r\n      this.timeout(30000);\r\n      const url = 'http://wp.seantburke.com/sitemap.xml';\r\n      sitemapper.getSites(url, (err, sites) => {\r\n        sites.should.be.Array;\r\n        isUrl(sites[0]).should.be.true;\r\n        done();\r\n      });\r\n    });\r\n  });\r\n});\r\n"],"file":"test.es5.js"}